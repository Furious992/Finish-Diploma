# Дипломная работа. Перцев Максим Андреевич

В рамках дипломного практикума мной была реализована облачная инфраструктура и настроен полный цикл работы с приложением: от развёртывания инфраструктуры до автоматической сборки и деплоя приложения в Kubernetes.

Целью работы было получить практический опыт работы с облачными технологиями, инфраструктурой как кодом, контейнеризацией, Kubernetes и CI/CD.

## 1. Создание облачной инфраструктуры

Для развёртывания инфраструктуры был выбран облачный провайдер **Yandex Cloud**.

Вся инфраструктура создаётся с помощью **Terraform**, без ручного создания ресурсов через веб-интерфейс.  
Terraform-конфигурация разбита на два этапа:

* > 00-bootstrap — создание сервисного аккаунта и Object Storage bucket для хранения terraform state.

* > 10-main — создание основной инфраструктуры:

  * сети VPC,
  * подсетей в разных зонах доступности,
  * managed Kubernetes кластера,
  * группы рабочих нод.

Terraform настроен так, что инфраструктура может быть полностью создана и удалена командами:
```bash
terraform apply
terraform destroy
```

Это позволяет легко пересоздавать инфраструктуру при необходимости.

Дополнительно для Terraform был настроен **CI pipeline в GitHub Actions**, который при каждом изменении кода выполняет:

 > * terraform fmt  
 > * terraform validate  
 > * terraform plan  

Это позволяет автоматически проверять корректность конфигурации.

Репозиторий с инфраструктурой:  
> https://github.com/Furious992/diploma-infra

----
## 2. Развёртывание Kubernetes кластера

После создания инфраструктуры был развёрнут **managed Kubernetes кластер** в Yandex Cloud.  

Кластер доступен извне, настроен доступ через kubeconfig.  
Для проверки работоспособности использовались команды:  

```bash
kubectl get nodes
kubectl get pods --all-namespaces
```

Все системные поды работают корректно, ноды находятся в статусе Ready.

----
## 3. Создание тестового приложения

В качестве тестового приложения был создан простой веб-сервис на базе **nginx**, который отдаёт статическую HTML-страницу.

Для приложения подготовлены:

 > * index.html — страница приложения,
 > * nginx.conf — конфигурация nginx,
 > * Dockerfile — сборка Docker-образа.

Docker-образ собирается и публикуется в **DockerHub**:  
> https://hub.docker.com/r/furious992/diploma-app

Репозиторий с приложением:  
> https://github.com/Furious992/diploma-app

----
## 4. Деплой приложения и мониторинг

Приложение было задеплоено в Kubernetes с помощью манифестов Deployment и Service.  
Service настроен как **LoadBalancer**, поэтому приложение доступно по внешнему IP:  

 * Тестовое приложение:
 > http://158.160.164.74

Для мониторинга кластера была установлена система **kube-prometheus-stack**, включающая:  

 * Prometheus,
 * Grafana,
 * Alertmanager,
 * node-exporter.

Grafana доступна по внешнему IP (**Предоставлю log/pass по запросу преподавателя**):  
 > http://158.160.223.63

В Grafana доступны дашборды, отображающие:  

 * состояние Kubernetes кластера,
 * нагрузку на ноды,
 * использование ресурсов.

Манифесты Kubernetes и описание установки мониторинга вынесены в отдельный репозиторий:  
> https://github.com/Furious992/diploma-k8s

## 5. Настройка CI/CD

Для приложения был настроен полноценный **CI/CD pipeline на GitHub Actions**.

Pipeline работает следующим образом:  

 * При коммите в ветку **main**:
   * собирается Docker-образ,
   * образ публикуется в DockerHub с тегом **latest**,
   * выполняется автоматический деплой новой версии в Kubernetes.
 * При создании тега (например **v1.0.0**):
   * собирается Docker-образ с соответствующим тегом,
   * образ публикуется в DockerHub,
   * в кластер деплоится версия с этим тегом.
Таким образом реализован полный цикл:  

> изменение кода → сборка → публикация → деплой → работающий сервис.

## 6. Итог работы

В результате выполнения дипломного практикума мной были освоены и применены на практике следующие технологии:  

 * Yandex Cloud
 * Terraform (Infrastructure as Code)
 * Kubernetes
 * Docker
 * Helm
 * Prometheus и Grafana
 * GitHub Actions (CI/CD)  

Была реализована полностью рабочая система, включающая:  

 * автоматизированную инфраструктуру,
 * Kubernetes кластер,
 * мониторинг,
 * контейнеризированное приложение,
 * автоматическую сборку и деплой.

## Заключение 

Во время выполнения работы я получил практический опыт построения инфраструктуры и DevOps-процессов с нуля.
Проект показал, как все этапы — инфраструктура, кластер, приложение, мониторинг и CI/CD — связаны между собой и работают как единая система.
